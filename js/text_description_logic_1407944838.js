 
/*
  Updated: 2014-08-13 11:47:21.540128
  Readable Source in //Ceres/training/webmaps/Bsouthga_mugroup/webdev_repo/stateOfRetirement/js/
  bsouthga(at)urban(dot)org
*/

var unavailable_text='Data not available.';function detailed_description_string(sub_data,planid,occupation){var aggregate_plan=(planid=="XX00"),table_string='';if(aggregate_plan)table_string+='';else{table_string+=''+'<td colspan="1" align="center">'+'<a style="width:60px;" class="dlButton" href="./plan_detail.html?planid='+planid+'">Click to<br/>View Plan<br/>Details</a>'+'</td>';table_string+=('<td class="textPart textPartOne" colspan="3">'+younger_workers(sub_data)+'<br/>'+dynamic_workforce(sub_data)+'<br/>'+encouraging_work(sub_data,occupation)+'</td>'+'<td class="textPart textPartOne" colspan="2">'+retirement_security_short(sub_data,occupation)+'<br/>'+retirement_security_long(sub_data,occupation)+'</td>'+'<td class="textPart textPartTwo" colspan="2">'+required_contributions(sub_data)+'<br/>'+plan_funding(sub_data)+'<br/>'+'</td>');};return table_string;}function grade_var_header(colWidth,cols){var out='';for(i=0;i<cols.length;i++)out+='<td class="stateColHeader" id="'+cols[i].code+'">'+'<div  class="col_header_text">'+cols[i].text+'</div>'+'</td>';return out;}function grade_var_images(sub_data,dataOrderRef,colWidth){var out='';for(j=0;j<dataOrderRef.length;j++){var ins=sub_data[dataOrderRef[j]];var text=(ins=="N"?"NOT AVAILABLE":ins);out+='<td class="grade_cell stateData '+dataOrderRef[j]+'">'+'<div class="grade_div '+ins+'">'+text+'</div></td>';}return out;}function percent(x,dec){var dec=dec||2;return Math.round(Number(x)*(100*Math.pow(10,dec)))/Math.pow(10,dec);}function highlight_span(filter_var,table_string){return '<span class="highlight_span" id="'+filter_var+'">'+table_string+'</span>';}function younger_workers(sub_data){var filter_var="YGGD";var grade_letter=sub_data[filter_var];var table_string='<b>Rewarding Younger Workers</b></br>';if(grade_letter!="N"){var detail_percent=percent(sub_data.YGDT);table_string+=grade_letter+', because 25-year-old hires';if(grade_letter=='A'||grade_letter=='B')var ins=' accumulate '+detail_percent+' percent of the maximum value of their ';else if(grade_letter=='C'||grade_letter=='D')var ins=' accumulate only '+detail_percent+' percent of the maximum value of their ';else var ins=' do not accumulate any ';table_string+=ins+'lifetime pension benefits, net of their own contributions, in the first 10 years of service.';}else table_string+=unavailable_text;return highlight_span(filter_var,table_string);}function dynamic_workforce(sub_data){var filter_var="DYGD";var grade_letter=sub_data[filter_var];var table_string='<b>Promoting a Dynamic Workforce</b></br>';if(grade_letter!="N"){var detail_percent=percent(sub_data.DYDT);table_string+=grade_letter+', because 25-year-old hires';if(grade_letter=='A'||grade_letter=='B')var ins=' never earn more than ';else var ins=' earn ';table_string+=ins+detail_percent+' percent of the accumulated value of their lifetime pension benefits in a single year.';}else table_string+=unavailable_text;return highlight_span(filter_var,table_string);}function encouraging_work(sub_data,occupation){var filter_var="OLGD";var grade_letter=sub_data[filter_var];var table_string='<b>Encouraging Work at Older Ages</b></br>';if(grade_letter!="N"){var top_age=(occupation=="PF"?55:65);var detail_percent=percent(-Number(sub_data.OLDT));var override_text='';if(sub_data.DROP===1&&grade_letter=='B')override_text=", because the plan has a deferred retirement option that prevents older employees from losing many pension benefits.";if(sub_data.DROP===0&&grade_letter!='A'){var years_worked=("MNRT"==0||"MNRT">=60?"in the five years prior to mandatory retirement":"between ages "+top_age+" and "+(top_age+4));override_text=", because lifetime pension benefits net of employee contributions fall "+detail_percent+" percent on average for each year worked "+years_worked+".";}if(grade_letter=='A')override_text=", because lifetime pension benefits continue to increase after age "+top_age+".";if(override_text==='')throw "No override text for encouraging older workers";table_string+=grade_letter+override_text;}else table_string+=unavailable_text;return highlight_span(filter_var,table_string);}function retirement_security_short(sub_data,occupation){var filter_var="S1GD";var grade_letter=sub_data[filter_var];var table_string='<b>Providing Retirement Income to Short-Term Employees</b></br>';if(grade_letter!="N"){var sec_short_rat=sub_data.S1DT;var grade_descript=(sec_short_rat===0?" none":(grade_letter=="A"||grade_letter=="B"?"":" only ")+percent(sec_short_rat)+' percent');table_string+=grade_letter+', because retirees who change jobs every 8 years receive '+(sub_data.SSDT=="1"?" Social Security and ":"")+'pension benefits at age 70 that replace '+grade_descript+' of their age-'+(occupation=="PF"?"54":"64")+' earnings.';}else table_string+=unavailable_text;return highlight_span(filter_var,table_string);}function retirement_security_long(sub_data,occupation){var filter_var="S3GD";var grade_letter=sub_data[filter_var];var table_string='<b>Providing Retirement Income to Long-Term Employees</b></br>';if(grade_letter!="N"){var sec_long=sub_data.S3DT;var grade_descript=(sec_long===0?" none":(grade_letter=="A"||grade_letter=="B"?"":" only ")+percent(sec_long)+' percent');table_string+=grade_letter+', because retirees with 40 years of service receive '+(sub_data.SSDT=="1"?" Social Security and ":"")+'pension benefits at age 70 that replace '+grade_descript+' of their age-'+(occupation=="PF"?"54":"64")+' earnings.';}else table_string+=unavailable_text;return highlight_span(filter_var,table_string);}function required_contributions(sub_data){var filter_var="AGGD";var grade_letter=sub_data[filter_var];var table_string='<b>Making Required Contributions</b></br>';if(grade_letter!="N"){var arc_detail=sub_data.AGDT;var p=percent(arc_detail);table_string+=grade_letter+', because the plan has contributed '+(grade_letter=="A"||grade_letter=="B"||grade_letter=="F"?"":" only ")+(p>500?'over five times':(p===0?" none of":p+' percent of'))+' its annual required contributions over the past four years.';}else table_string+=unavailable_text;return highlight_span(filter_var,table_string);}function plan_funding(sub_data){var filter_var="FDGD";var grade_letter=sub_data[filter_var];var table_string='<b>Funding Ratio</b></br>';if(grade_letter!="N"){var fratio=sub_data.FDDT;table_string+=grade_letter+', because the plan\'s assets cover '+(grade_letter=="A"||grade_letter=="B"?"":" only ")+percent(fratio)+' percent of projected liabilities.';}else table_string+=unavailable_text;return highlight_span(filter_var,table_string);}