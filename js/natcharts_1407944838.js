 
/*
  Updated: 2014-08-13 11:47:21.130124
  Readable Source in //Ceres/training/webmaps/Bsouthga_mugroup/webdev_repo/stateOfRetirement/js/
  bsouthga(at)urban(dot)org
*/

var letter_colors=['#6699CC','#D1DCEE','#ECD7C2','#F9A458','#A02022','#555555'];var tMax,lRef=["OVRL","YGGD","DYGD","OLGD","S1GD","S3GD","AGGD","FDGD"];function chartMax(occ,newHire,data_source){data_source=data_source||natData;tMax=-Infinity;for(i=0;i<lRef.length;i++){var aMax=Math.max.apply(Math,data_source[occ][newHire][lRef[i]]);tMax=Math.max(aMax,tMax);}}function nat_chart_text(occ){var dist_text=$('.tableSelected').attr('id')=="button-national"?"State-Level Distributions: ":"Plan-Level Distributions: ";var employees=capitalize((occ=="X"?"All Employees":occ_ref[occ])+(occ=="GL"||occ=="GS"?" Employees":""));var hiredate=$(".buttons.hire.selected").text();var insert=dist_text+employees+", "+hiredate+(hiredate=="All"?" Hires":"");$('#natChartHeader').text(insert);}function drawNationalCharts(occ,newHire,data_source){$('#stateTableHeader').empty();nat_chart_text(occ);data_source=data_source||natData;chartMax(occ,newHire,data_source);for(i=1;i<=lRef.length;i++)$('#container'+i).highcharts({chart:{type:'column',width:225},title:{text:''},legend:{enabled:false},exporting:{enabled:false},credits:{enabled:false},tooltip:{enabled:false},xAxis:{categories:['A','B','C','D','F','(NA)'],tickWidth:0},yAxis:{min:0,max:tMax+5,tickInterval:1,title:{text:''},lineWidth:0,tickWidth:0,gridLineWidth:0,labels:{enabled:false}},plotOptions:{column:{pointPadding:-0.1,borderWidth:0,dataLabels:{crop:false,overflow:"none"}},series:{states:{hover:{enabled:false}}}},series:[{data:(function(){out=[];for(letter=0;letter<6;letter++)out.push({y:data_source[occ][newHire][lRef[i-1]][letter],dataLabels:{enabled:true,align:'center',style:{fontWeight:'bold'},verticalAlign:'top',formatter:function(){return this.y+'%';},y:-18},color:letter_colors[letter]});return out;})()}]});}function chartChange(occ,newHire,data_source){nat_chart_text(occ);data_source=data_source||natData;chartMax(occ,newHire,data_source);for(i=0;i<lRef.length;i++){var thisD=$('#container'+(i+1)).highcharts().series[0].data;for(j=0;j<thisD.length;j++)thisD[j].update(data_source[occ][newHire][lRef[i]][j]);$('#container'+(i+1)).highcharts().yAxis[0].setExtremes(0,tMax+5);}}